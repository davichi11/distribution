<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.distribution.modules.account.dao.MemberAccountMapper">
    <resultMap id="BaseResultMap" type="com.distribution.modules.account.entity.MemberAccount">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="account_id" jdbcType="VARCHAR" property="accountId"/>
        <result column="member_type" jdbcType="VARCHAR" property="memberType"/>
        <result column="member_amount" jdbcType="DECIMAL" property="memberAmount"/>
        <result column="alipay_account" property="aliPayAccount"/>
        <result column="is_delete" jdbcType="VARCHAR" property="isDelete"/>
        <result column="add_time" jdbcType="VARCHAR" property="addTime"/>
        <result column="update_time" jdbcType="VARCHAR" property="updateTime"/>
        <association property="member" javaType="com.distribution.modules.dis.entity.DisMemberInfoEntity"
                     column="member_id">
            <id property="id" column="m_id"/>
            <result property="disPlatformId" column="dis_platform_id"/>
            <result property="disFullIndex" column="dis_full_index"/>
            <result property="disUserName" column="dis_user_name"/>
            <result property="disLevel" column="dis_level"/>
            <result property="disUserType" column="dis_user_type"/>
            <result property="openId" column="open_id"/>
            <result property="disNote" column="dis_note"/>
            <result property="addTime" column="add_time"/>
            <result property="updateTime" column="update_time"/>
            <result property="isDelete" column="is_delete"/>
        </association>
    </resultMap>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        account_id,
        member_type,
        member_amount,
        a.alipay_account,
        a.is_delete,
        a.add_time,
        a.update_time,
        id as "m_id",
        dis_platform_id,
        dis_user_id,
        dis_model_id,
        dis_full_index,
        dis_user_name,
        dis_level,
        dis_user_type,
        dis_note,
        m.add_time,
        m.update_time,
        m.is_delete
        from member_account a
        left join dis_member_info m on a.member_id=m.id
        where account_id = #{accountId,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from member_account
        where account_id = #{accountId,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.distribution.modules.account.entity.MemberAccount">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into member_account (account_id, member_id, member_type,alipay_account,
        member_amount, is_delete, add_time,
        update_time)
        values (#{accountId,jdbcType=VARCHAR}, #{member.id,jdbcType=VARCHAR}, #{memberType,jdbcType=VARCHAR},
        #{aliPayAccount},
        #{memberAmount,jdbcType=DECIMAL}, #{isDelete,jdbcType=VARCHAR}, #{addTime,jdbcType=VARCHAR},
        #{updateTime,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.distribution.modules.account.entity.MemberAccount">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into member_account
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="accountId != null">
                account_id,
            </if>
            <if test="member != null">
                member_id,
            </if>
            <if test="memberType != null">
                member_type,
            </if>
            <if test="memberAmount != null">
                member_amount,
            </if>
            <if test="aliPayAccount != null">
                alipay_account,
            </if>
            <if test="isDelete != null">
                is_delete,
            </if>
            <if test="addTime != null">
                add_time,
            </if>
            <if test="updateTime != null">
                update_time,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="accountId != null">
                #{accountId,jdbcType=VARCHAR},
            </if>
            <if test="member != null">
                #{member.id,jdbcType=VARCHAR},
            </if>
            <if test="memberType != null">
                #{memberType,jdbcType=VARCHAR},
            </if>
            <if test="memberAmount != null">
                #{memberAmount,jdbcType=DECIMAL},
            </if>
            <if test="aliPayAccount != null">
                #{aliPayAccount},
            </if>
            <if test="isDelete != null">
                #{isDelete,jdbcType=VARCHAR},
            </if>
            <if test="addTime != null">
                #{addTime,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                #{updateTime,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.distribution.modules.account.entity.MemberAccount">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update member_account
        <set>
            <if test="member != null">
                member_id = #{member.id,jdbcType=VARCHAR},
            </if>
            <if test="memberType != null">
                member_type = #{memberType,jdbcType=VARCHAR},
            </if>
            <if test="memberAmount != null">
                member_amount = #{memberAmount,jdbcType=DECIMAL},
            </if>
            <if test="aliPayAccount != null">
                alipay_account = #{aliPayAccount},
            </if>
            <if test="isDelete != null">
                is_delete = #{isDelete,jdbcType=VARCHAR},
            </if>
            <if test="addTime != null">
                add_time = #{addTime,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime,jdbcType=VARCHAR},
            </if>
        </set>
        where account_id = #{accountId,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.distribution.modules.account.entity.MemberAccount">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update member_account
        set member_id = #{member.id,jdbcType=VARCHAR},
        member_type = #{memberType,jdbcType=VARCHAR},
        member_amount = #{memberAmount,jdbcType=DECIMAL},
        alipay_account = #{aliPayAccount},
        is_delete = #{isDelete,jdbcType=VARCHAR},
        add_time = #{addTime,jdbcType=VARCHAR},
        update_time = #{updateTime,jdbcType=VARCHAR}
        where account_id = #{accountId,jdbcType=VARCHAR}
    </update>
    <select id="selectMemberAccount" resultMap="BaseResultMap">
        select
            account_id,
            member_type,
            member_amount,
            alipay_account,
            a.is_delete,
            a.add_time,
            a.update_time,
            id as "m_id",
            dis_platform_id,
            dis_user_id,
            dis_model_id,
            dis_full_index,
            dis_user_name,
            dis_level,
            dis_user_type,
            open_id,
            dis_note,
            m.add_time,
            m.update_time,
            m.is_delete
        from member_account a
            left join dis_member_info m on a.member_id = m.id
        where member_id = #{memberId}
    </select>

    <select id="selectMemberAccountByUserId" resultMap="BaseResultMap">
        select
            account_id,
            member_type,
            member_amount,
            alipay_account,
            a.is_delete,
            a.add_time,
            a.update_time,
            id as "m_id",
            dis_platform_id,
            dis_user_id,
            dis_model_id,
            dis_full_index,
            dis_user_name,
            dis_level,
            open_id,
            dis_user_type,
            dis_note,
            m.add_time,
            m.update_time,
            m.is_delete
        from member_account a
            left join dis_member_info m on a.member_id = m.id
            left join tb_user t on t.user_id = m.dis_user_id
        where m.id = #{userId} or t.mobile = #{userId}
    </select>
    <select id="selectByAlipay" resultMap="BaseResultMap">
        select
            account_id,
            member_type,
            member_amount,
            alipay_account,
            a.is_delete,
            a.add_time,
            a.update_time,
            id as "m_id",
            dis_platform_id,
            dis_user_id,
            dis_model_id,
            dis_full_index,
            dis_user_name,
            dis_level,
            open_id,
            dis_user_type,
            dis_note,
            m.add_time,
            m.update_time,
            m.is_delete
        from member_account a
            left join dis_member_info m on a.member_id = m.id
            left join tb_user t on t.user_id = m.dis_user_id
        where alipay_account =#{alipayAccount}
    </select>
</mapper>